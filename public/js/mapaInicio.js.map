{"version":3,"file":"mapaInicio.js","mappings":";;UAAA;UACA;;;;;WCDA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D,E;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,EAAE,yBAAyB,EAAE,EAAE,EAAE,EAAE,EAAE;AAC/D,6BAA6B;AAC7B,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,uDAAuD,2BAA2B;AAClF,oEAAoE,mBAAmB;AACvF,oCAAoC,kBAAkB,gCAAgC,kBAAkB;AACxG,qDAAqD,wBAAwB;AAC7E,sCAAsC,aAAa;AACnD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,G","sources":["webpack://bienes-raices/webpack/bootstrap","webpack://bienes-raices/webpack/runtime/make namespace object","webpack://bienes-raices/./src/js/mapaInicio.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","(function(){\r\n    const lat = 20.6368861\r\n    const lng = -103.4389198\r\n    const mapa = L.map('mapa-inicio').setView([lat, lng ], 13)\r\n\r\n    let markers = new L.FeatureGroup().addTo(mapa)\r\n    let propiedades =[]\r\n        //Filtros\r\n        const filtros= {\r\n            categoria: '',\r\n            precio: ''\r\n        }\r\n\r\n    const categoriasSelect = document.querySelector('#categorias')\r\n    const preciosSelect = document.querySelector('#precios')\r\n\r\n\r\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n        attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n    }).addTo(mapa)\r\n\r\n\r\n    //Filtrado de categorias y precios\r\ncategoriasSelect.addEventListener('change', e => {\r\n    filtros.categoria = +e.target.value\r\n    filtrarPropiedades()\r\n})\r\npreciosSelect.addEventListener('change', e => {\r\n    filtros.precio = +e.target.value\r\n    filtrarPropiedades()\r\n})\r\n\r\n    const obtenerPropiedades = async()=>{\r\n        try {\r\n            const url= '/api/propiedades'\r\n            const respuesta = await fetch(url)\r\n            propiedades = await respuesta.json()\r\n            mostrarPropiedades(propiedades)\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n    const mostrarPropiedades = propiedades =>{\r\n        //Limpiar markers previos\r\n        markers.clearLayers()\r\n        propiedades.forEach(propiedad => {\r\n            const marker  = new L.marker([propiedad?.lat, propiedad?.lng],{\r\n                autoPan: true\r\n            })\r\n            .addTo(mapa)\r\n            .bindPopup(`\r\n                <p class=\"text-indigo-600 font-bold\">${propiedad.categoria.nombre}</p>\r\n                <h1 class=\"text-xl font-extrabold uppercase my-2\">${propiedad?.titulo} </h1> \r\n                <img src=\"uploads/${propiedad?.imagen}\" alt=\"Imagen de la propiedad ${propiedad?.titulo}\"> \r\n                <p class=\"text-gray-600 font-bold\">${propiedad.precio.nombre}</p>\r\n                <a href=\"/propiedad/${propiedad.id}\" class=\"bg-indigo-600 block p-2 text-center font-bold uppercase\">Ver Propiedad</a>\r\n            `)\r\n\r\n            markers.addLayer(marker)\r\n        })\r\n    }\r\n    const filtrarPropiedades= ()=>{\r\n        const resultado = propiedades.filter(filtrarCategoria).filter(filtrarPrecio)\r\n        mostrarPropiedades(resultado)\r\n    }\r\n    const filtrarCategoria = propiedad =>\r\n        filtros.categoria ? propiedad.categoriaId === filtros.categoria : propiedad\r\n    const filtrarPrecio = propiedad =>\r\n        filtros.precio ? propiedad.precioId === filtros.precio : propiedad\r\n\r\n    obtenerPropiedades()\r\n})()"],"names":[],"sourceRoot":""}